<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="sqlField_admin">	

	<select id="getAllBoardList" resultType="QBoard">
			select q_num, q_writer, q_email, q_subject, q_password, q_regdate, q_readcount, q_ref, q_re_step, q_re_level, q_content, q_ip		        
			from (select rownum as rank, q_num, q_writer, q_email, q_subject, q_password, q_regdate, q_readcount, q_ref, q_re_step, q_re_level, q_content, q_ip
			from (select q_num, q_writer, q_email, q_subject, q_password, q_regdate, q_readcount, q_ref, q_re_step, q_re_level, q_content, q_ip
			from q_board
			<if test="whatColumn=='q_writer'">
				where q_writer like #{keyword}
			</if>
			<if test="whatColumn=='q_subject'">
				where q_subject like #{keyword}
			</if>
			order by q_ref desc, q_re_step asc ))
		</select>
		
		<select id="getTotalCount" resultType="int">
			select count(*) from q_board 
			<if test="whatColumn=='q_writer'">
				where q_writer like #{keyword}
			</if>
			<if test="whatColumn=='q_subject'">
				where q_subject like #{keyword}
			</if>
			order by q_num asc
		</select>
	
</mapper> 

